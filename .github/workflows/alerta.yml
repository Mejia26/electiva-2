name: Notificaci贸n ntfy.sh

# El trigger: Se activa cada vez que subes codigo (push) a la rama main
on:
  push:
    branches:
      - main

jobs:
  notificar:
    runs-on: ubuntu-latest

    steps:
      # 1. Descarga el c贸digo del repositorio en la m谩quina virtual de GitHub
      - name: Checkout de c贸digo
        uses: actions/checkout@v4

      # 2. Configura Node.js (opcional para un script simple, pero buena pr谩ctica)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # 3. Ejecuta el programa "Hola Mundo"
      - name: Ejecutar Hola Mundo
        run: node index.js

      # 4. Env铆a la notificaci贸n a ntfy.sh usando curl
      - name: Enviar alerta a ntfy
        run: |
          curl -H "Title: GitHub Actions Alert" \
               -H "Priority: high" \
               -H "Tags: rocket,computer" \
               -d "隆C贸digo subido a main con 茅xito! El programa Hola Mundo se ejecut贸 correctamente. " \
               ntfy.sh/devops-itla
